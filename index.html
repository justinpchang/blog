<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Food and other things</title>
    <link rel="stylesheet" type="text/css" href="tufte.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript">

      const POSTS = [
        {
          title: 'What is this?',
          author: 'JP',
          date: new Date(2021, 02, 04),
          file: 'what-is-this.html',
          excerpt: 'I always wanted to be the kind of person that journals. Nevermind the therapeutic benefits of journalling, I just wanted to have a time capsule of the kinds of problems I faced or what seemed important to me at different points in my life.',
          public: true,
        },
      ];

    </script>
  </head>
  <body>
    <article>
      <h1>Food and other things</h1>
      <p class="subtitle">
        A blog about a multitude of subjects
        <label for="subjects" class="margin-toggle sidenote-number"></label>
        <input type="checkbox" id="subjects" class="margin-toggle" />
        <span class="sidenote">Namely: food</span>
      </p>
      <br />
      <div id="post-template" style="display: none;">
        <hr />
        <h2></h2>
        <p></p>
        <blockquote>
          <p></p>
          <footer>
            <a>Read more</a>
          </footer>
        </blockquote>
      </div>
    </article>
    <script type="text/javascript">
      function formatDate(date) {
        let d = new Date(date),
            month = '' + (d.getMonth() + 1),
            day = '' + d.getDate(),
            year = d.getFullYear();
        if (month.length < 2) {
          month = '0' + month;
        }
        if (day.length < 2) {
          day = '0' + day;
        }
        return [year, month, day].join('-');
      }

      for (let post of POSTS) {
        if (post.public) {
          const template = document.getElementById('post-template');
          let filled = template.cloneNode(true);
          filled.id = '';
          filled.children[1].innerHTML = post.title;
          filled.children[2].innerHTML = `Posted by ${post.author} (${formatDate(post.date)})`;
          filled.children[3].children[0].innerHTML = `"${post.excerpt}.."`;
          filled.children[3].children[1].children[0].href = 'pages/' + post.file;
          filled.style.display = 'block';
          template.parentNode.appendChild(filled);
        }
      }
    </script>
  </body>
</html>
